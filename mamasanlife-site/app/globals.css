@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  --c-primary: #8CB9BD; /* 比率4 */
  --c-bg: #FEFBF6;      /* 比率3（背景）*/
  --c-accent: #ECB159;  /* 比率2 */
  --c-emphasis: #B67352;/* 比率1 */
  /* 端の余白（SP〜PCで可変） */
  --edge-gap: clamp(16px, 5vw, 28px);
}

html { font-size: 18px; }
body {
  color: #2b2b2b;
  background: var(--c-bg);
  /* 本文=DIN系(Barlow)を優先、和文はNoto Sans JP/Zen Kakuでカバー */
  font-family: var(--font-body), var(--font-display), 'Noto Sans JP', 'Zen Kaku Gothic New', system-ui, -apple-system, 'Hiragino Kaku Gothic ProN', 'Meiryo', sans-serif;
  line-height: 1.75;
  font-weight: 300;
  font-feature-settings: 'palt' 1;
}

/* Fonts */
.font-display { font-family: var(--font-display), sans-serif; }
.font-body { font-family: var(--font-body), 'Noto Sans JP', 'Zen Kaku Gothic New', sans-serif; }

/* Hero styles */
.hero-title { font-family: var(--font-display), 'Noto Sans JP', system-ui, sans-serif; font-weight: 700; letter-spacing: .001em; line-height: 1.28; padding-bottom: 0.08em; display: inline-block;
  background: linear-gradient(90deg, var(--c-emphasis), var(--c-primary));
  -webkit-background-clip: text; background-clip: text; color: transparent; }
.hero-sub { font-family: var(--font-body), 'Noto Sans JP', 'Zen Kaku Gothic New', sans-serif; color: #2b2b2b; letter-spacing: .005em; line-height: 1.8; }

/* Display headings (stylish but readable) */
.title-display { font-family: var(--font-display), 'Noto Sans JP', system-ui, sans-serif; font-weight: 700; letter-spacing: .001em; color: var(--c-emphasis); font-size: clamp(2rem, 5.2vw + 0.2rem, 3rem); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.heading-accent { font-family: var(--font-display), 'Noto Sans JP', system-ui, sans-serif; font-weight: 700; letter-spacing: .001em; color: var(--c-emphasis); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
.hero-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
/* Any heading explicitly styled with text-emphasis should be 1-line */
h1.text-emphasis, h2.text-emphasis, h3.text-emphasis, h4.text-emphasis, h5.text-emphasis, h6.text-emphasis {
  white-space: nowrap; overflow: hidden; text-overflow: ellipsis;
}
.card-title { font-family: var(--font-display), 'Noto Sans JP', system-ui, sans-serif; font-weight: 700; letter-spacing: 0; }

/* Form inputs default text color (fix mobile header inheriting white) */
input, textarea, select { color: #2b2b2b; }
input::placeholder { color: #6b7280; }

.container-responsive { @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8; }
/* 画面端に本文が張り付かないよう、常に余白を確保（ノッチ対応） */
.container-responsive {
  padding-left: max(var(--edge-gap), env(safe-area-inset-left));
  padding-right: max(var(--edge-gap), env(safe-area-inset-right));
}
/* 念のため単体ブロックのはみ出しを抑制 */
.prose-content, .prose-content * { max-width: 100%; }
.prose-content iframe { width: 100%; height: auto; }

.prose-content h1 { @apply font-bold mt-8 mb-3; line-height: 1.25; letter-spacing: .002em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.9rem, 5vw + 0.2rem, 2.8rem); }
.prose-content h1 { border-bottom: 2px solid rgba(236,177,89,.8); padding-bottom: .25rem; }
.prose-content h2 { @apply font-semibold mt-10 mb-4; line-height: 1.3; letter-spacing: .001em; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.6rem, 4.2vw + 0.15rem, 2.4rem); }
.prose-content h3 { @apply font-semibold mt-8 mb-3; line-height: 1.35; border-bottom: 1px solid color-mix(in srgb, var(--c-primary) 60%, transparent); padding-bottom: .25rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.35rem, 3.2vw + 0.1rem, 2rem); }
/* H4–H6 one-line fluid */
.prose-content h4 { @apply font-semibold mt-6 mb-2; line-height: 1.35; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.18rem, 2.6vw + 0.08rem, 1.6rem); }
.prose-content h5 { @apply font-semibold mt-5 mb-2; line-height: 1.35; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.08rem, 2.2vw + 0.06rem, 1.35rem); }
.prose-content h6 { @apply font-semibold mt-4 mb-2; line-height: 1.35; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: clamp(1.0rem, 1.8vw + 0.05rem, 1.2rem); }
.prose-content h2, .prose-content h3, .prose-content h4 { scroll-margin-top: 5.5rem; }
.prose-content p  { @apply my-4; line-height: 1.9; }
.prose-content a { color: var(--c-emphasis); text-decoration: underline; text-underline-offset: 2px; text-decoration-thickness: 0.08em; }
.prose-content a:hover { color: var(--c-primary); background: transparent !important; }
.prose-content { overflow-wrap: anywhere; word-break: normal; }
.prose-content p, .prose-content li { white-space: normal; }
.prose-content a { overflow-wrap: anywhere; word-break: break-word; }
.prose-content ul { @apply list-disc pl-6 my-4; }
.prose-content ol { @apply list-decimal pl-6 my-4; }
.prose-content ul ul { list-style-type: circle; margin-top:.25rem; margin-bottom:.25rem; }
.prose-content ul ul ul { list-style-type: square; }
.prose-content ol ol { list-style-type: lower-alpha; }
.prose-content ol ol ol { list-style-type: lower-roman; }
.prose-content li { margin: .25rem 0; }
.prose-content li::marker { color: var(--c-emphasis); }
.prose-content blockquote { @apply border-l-4 pl-4 italic my-4; border-color: var(--c-emphasis); background: color-mix(in srgb, var(--c-primary) 10%, #fff); padding-top:.25rem; padding-bottom:.25rem; border-radius: .25rem; }
.prose-content img { @apply rounded-md my-6; }
.prose-content figure { @apply my-6; }
.prose-content figure img { @apply rounded-md; }
.prose-content table { @apply w-full; border-collapse: collapse; font-size: 0.95rem; }
.prose-content th, .prose-content td { @apply border px-3 py-2; line-height: 1.7; vertical-align: top; }
.prose-content th { @apply text-gray-700; font-weight: 600; }
.prose-content td, .prose-content th { word-break: break-word; overflow-wrap: anywhere; }
.prose-content thead th { @apply bg-gray-50 text-gray-700; }
.prose-content tbody tr:nth-child(odd) { @apply bg-white; }
.prose-content tbody tr:nth-child(even) { @apply bg-gray-50; }
/* Sticky header/first column inside table wrapper */
.table-sticky thead th { position: sticky; top: 0; z-index: 2; background: #fff; }
.table-sticky tbody td:first-child, .table-sticky thead th:first-child { position: sticky; left: 0; z-index: 1; background: #fff; }
@supports (background: color-mix(in srgb, white 100%, white)) {
  .table-sticky thead th { background: color-mix(in srgb, #fff 100%, transparent); }
  .table-sticky tbody td:first-child, .table-sticky thead th:first-child { background: color-mix(in srgb, #fff 100%, transparent); }
}
@media (max-width: 640px) {
  .prose-content table { font-size: 0.9rem; }
  .prose-content th, .prose-content td { @apply px-2 py-2; }
}
.prose-content hr { @apply my-8; border-color: color-mix(in srgb, var(--c-primary) 40%, transparent); opacity: .6; }

/* ── SP（~420px）タイポグラフィ微調整 ───────────────────── */
@media (max-width: 420px) {
  .prose-content { font-size: 0.95rem; }
  .prose-content p { line-height: 1.85; }
  .prose-content h2 { margin-top: 1.75rem; margin-bottom: .75rem; }
  .prose-content h3 { margin-top: 1.25rem; margin-bottom: .6rem; }
  .prose-content figure, .prose-content img { margin: 12px 0 !important; }
  .prose-content ul, .prose-content ol { margin: .6rem 0; }
  .prose-content blockquote { margin: .75rem 0; padding-top: .2rem; padding-bottom: .2rem; }
  /* 吹き出し（SpeechBlockView） */
  .speech-bubble { font-size: 14.5px !important; padding: 10px 12px !important; line-height: 1.7 !important; }
  .speech-block .rounded-2xl { border-radius: 14px !important; }
  .speech-block .speech-name { font-size: 10px; }
}
.prose-content hr { @apply my-8; border-color: color-mix(in srgb, var(--c-primary) 40%, transparent); opacity: .6; }

/* Breadcrumbs */
.breadcrumbs { @apply text-sm text-gray-600; }

/* AdSense fallback */
.ads-fallback { @apply text-center text-xs text-gray-500 border rounded-md py-3 bg-gray-50; }

/* Natural theme helpers */
.btn-brand { @apply inline-flex items-center gap-2 px-4 py-2 rounded-md text-white; background: var(--c-primary); }
.btn-brand:hover { filter: brightness(1.05); }
.chip-accent { @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-medium; background: var(--c-accent); color: #fff; }
.chip-primary { @apply inline-flex items-center rounded-full px-3 py-1 text-xs font-medium; background: var(--c-primary); color: #fff; }
.text-emphasis { color: var(--c-emphasis); }
.border-primary { border-color: var(--c-primary) !important; }
.bg-primary { background: var(--c-primary) !important; }

/* Focus ring: 強調色で統一（キーボード利用者が見やすいように） */
.focus-ring:focus-visible {
  outline: 2px solid var(--c-emphasis);
  outline-offset: 2px;
  border-radius: 6px;
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[role="button"]:focus-visible,
[role="tab"]:focus-visible {
  outline: 2px solid var(--c-emphasis);
  outline-offset: 2px;
  border-radius: 6px;
}

/* Tabs（AA配色を満たすコントラスト） */
.tab { @apply inline-flex items-center text-sm rounded-md px-3 py-2; border: 1px solid var(--c-primary); background: #fff; color:#2b2b2b; }
.tab:hover { background: #f1f7f8; color: var(--c-primary); border-color: var(--c-primary); }
.tab--active { border: 2px solid var(--c-emphasis); color: var(--c-emphasis); background: #fff; }
.card { @apply bg-white/90 border rounded-xl shadow-sm; }
.card:hover { @apply shadow; }

/* Link hover utility using site colors (underline removed site-wide) */
.link-brand { text-decoration: none; }
.link-brand:hover { color: var(--c-emphasis); }

/* Site-wide link hover: brand emphasis color (exclude buttons); underlineは非表示 */
a { text-decoration: none; }
a:hover:not(.btn-brand) {
  color: var(--c-emphasis) !important;
  transition: color .15s ease, background-color .15s ease;
  /* 淡い背景（primaryを薄く） */
  background-color: rgba(140,185,189,0.12);
  background-color: color-mix(in srgb, var(--c-primary) 15%, transparent);
  border-radius: 4px;
}

/* Underline offset & thickness — 今は非表示だが将来用に維持 */
/* a { text-underline-offset: 3px; text-decoration-thickness: 0.1em; text-decoration-skip-ink: auto; } */

/* Brand title (header) — DIN系 + 強い影 + 先頭文字を大きく */
.brand-title {
  font-family: 'DIN 2014', 'FF DIN', 'DIN Next LT Pro', var(--font-body), 'Noto Sans JP', 'Zen Kaku Gothic New', system-ui, sans-serif;
  color: #FEFBF6 !important;
  font-weight: 900; /* 太字 */
  letter-spacing: .01em;
  line-height: 1.05;
  display: inline-flex;
  align-items: center;
  /* 大きめの影（エンファシスカラー） */
  text-shadow: 2px 2px 0 #B67352, 4px 4px 0 #B67352;
  /* 縦長気味に */
  transform: scaleY(1.12);
  transform-origin: center bottom;
}
.brand-title .brand-word::first-letter {
  font-size: 1.7em;
  font-weight: 900;
  line-height: 1;
}
.prose-content .paw-icon { display: inline-block; margin-right: .5rem; color: var(--c-emphasis); }
.prose-content .h2-paw { position: absolute; left: .2rem; top: .15em; width: 1.1em; height: 1.1em; pointer-events: none; }
.prose-content .h2-paw::before { content: "\f1b0"; font-family: "Font Awesome 5 Free"; font-weight: 900; position: absolute; left: 0; top: 0; font-size: 1em; line-height: 1; color: var(--c-emphasis); }

/* Headings: allow wrapping on small screens */
/* Removed no-wrap to allow natural wrapping */
.marker-pen { background-image: linear-gradient(transparent 70%, color-mix(in srgb, var(--c-accent) 85%, transparent) 0); box-decoration-break: clone; }
.link-row { line-height: 0; }
.prose-content .banner-inline { display: inline-block; line-height: 0; }
/* Headings subtle padding so single-line text doesn't touch edges */
.prose-content h1, .prose-content h2, .prose-content h3, .prose-content h4, .prose-content h5, .prose-content h6 { padding-inline: 2px; }
/* Banner rows: unified height + vertical centering */
.banner-row-31 { height: 31px; display: flex; align-items: flex-start; }
.banner-row-40 { height: 40px; display: flex; align-items: flex-start; }
.banner-row-31 a, .banner-row-40 a { height: 100%; display: flex; align-items: flex-start; }
.banner-row-31 img { max-height: 31px; height: 31px; width: auto; display: block; }
.banner-row-40 img { max-height: 40px; height: 40px; width: auto; display: block; }
.clear-both { clear: both; }
/* Appreach card (grid layout) */
.appreach { display: grid; grid-template-columns: 120px 1fr; grid-template-areas: "icon detail" "icon links"; gap: 12px 16px; align-items: start; border: 1px solid #dcdcdc; padding: 14px; border-radius: 12px; background: #fff; box-shadow: 0 1px 2px rgba(0,0,0,.03); }
.prose-content .appreach { margin: 12px 0; }
.appreach__icon { grid-area: icon; width: 120px; height: 120px; border-radius: 16px; object-fit: cover; display: block; }
.appreach__detail { grid-area: detail; min-width: 0; }
.appreach__name { font-weight: 700; margin: 2px 0 6px; font-size: 18px; line-height: 1.4; }
.appreach__info { color: #666; font-size: 13px; margin: 0; display: flex; gap: 10px; flex-wrap: wrap; }
.appreach__links { grid-area: links; display: flex; align-items: center; gap: 12px; }
.appreach__links img { height: 40px; width: auto; display: block; }
.appreach__aslink, .appreach__gplink { line-height: 0; display: inline-block; }
@media (max-width: 420px){
  .appreach { grid-template-columns: 96px 1fr; }
  .appreach__icon { width: 96px; height: 96px; border-radius: 12px; }
}
/* Reset inside htmlEmbed to prevent prose rules from breaking layout */
.prose-content .embed-html { margin: 12px 0; line-height: 1.6; }
.prose-content .embed-html a { text-decoration: none !important; background: none !important; color: inherit; }
.prose-content .embed-html img { margin: 0 !important; border-radius: 0 !important; display: inline-block; vertical-align: middle; }
.prose-content .embed-html p { margin: 0; }

/* (dev preview styles removed) */
